<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>JS面试精选 | </title><meta name="description" content="">
    <link rel="modulepreload" href="/assets/app.4afcc58d.js"><link rel="modulepreload" href="/assets/js.html.fc6d541f.js"><link rel="modulepreload" href="/assets/js.html.a0bf57de.js"><link rel="prefetch" href="/assets/index.html.336290ef.js"><link rel="prefetch" href="/assets/css.html.506e1593.js"><link rel="prefetch" href="/assets/vue.html.84befb48.js"><link rel="prefetch" href="/assets/docker.html.e8d84372.js"><link rel="prefetch" href="/assets/webpack.html.beed4981.js"><link rel="prefetch" href="/assets/index.html.424547b0.js"><link rel="prefetch" href="/assets/http.html.c64f9040.js"><link rel="prefetch" href="/assets/WebSocket.html.397bc3fc.js"><link rel="prefetch" href="/assets/浏览器.html.3be9ac20.js"><link rel="prefetch" href="/assets/设计模式.html.6cbb97f1.js"><link rel="prefetch" href="/assets/gungnir博客配置.html.39a6fc28.js"><link rel="prefetch" href="/assets/nuxt.html.ffd9bbf8.js"><link rel="prefetch" href="/assets/vue.html.16fcb2f8.js"><link rel="prefetch" href="/assets/css.html.ed27349b.js"><link rel="prefetch" href="/assets/html.html.5d591db3.js"><link rel="prefetch" href="/assets/ES6.html.d18c8b41.js"><link rel="prefetch" href="/assets/js基础.html.d9c4f284.js"><link rel="prefetch" href="/assets/js文件处理.html.c503b127.js"><link rel="prefetch" href="/assets/ts.html.04aa003e.js"><link rel="prefetch" href="/assets/404.html.7d858b3d.js"><link rel="prefetch" href="/assets/index.html.de26035a.js"><link rel="prefetch" href="/assets/index.html.deae5fb3.js"><link rel="prefetch" href="/assets/index.html.4cb84524.js"><link rel="prefetch" href="/assets/css.html.93508d1c.js"><link rel="prefetch" href="/assets/vue.html.3c6162b9.js"><link rel="prefetch" href="/assets/docker.html.bbb72b70.js"><link rel="prefetch" href="/assets/webpack.html.84c1a7de.js"><link rel="prefetch" href="/assets/index.html.3b7f3b90.js"><link rel="prefetch" href="/assets/http.html.9621d1aa.js"><link rel="prefetch" href="/assets/WebSocket.html.7c6ff825.js"><link rel="prefetch" href="/assets/浏览器.html.a2b666bb.js"><link rel="prefetch" href="/assets/设计模式.html.7377c483.js"><link rel="prefetch" href="/assets/gungnir博客配置.html.7938d25f.js"><link rel="prefetch" href="/assets/nuxt.html.6dd0db5d.js"><link rel="prefetch" href="/assets/vue.html.2ec71294.js"><link rel="prefetch" href="/assets/css.html.225aaa80.js"><link rel="prefetch" href="/assets/html.html.f56f005d.js"><link rel="prefetch" href="/assets/ES6.html.b981eacd.js"><link rel="prefetch" href="/assets/js基础.html.81abd258.js"><link rel="prefetch" href="/assets/js文件处理.html.9a722572.js"><link rel="prefetch" href="/assets/ts.html.f117f106.js"><link rel="prefetch" href="/assets/404.html.55b7a351.js"><link rel="prefetch" href="/assets/index.html.5977f679.js"><link rel="prefetch" href="/assets/index.html.b927cf80.js"><link rel="prefetch" href="/assets/404.c52688da.js"><link rel="prefetch" href="/assets/HomePage.4b2e5824.js"><link rel="prefetch" href="/assets/Layout.8b63924c.js"><link rel="prefetch" href="/assets/Links.a9ebced6.js"><link rel="prefetch" href="/assets/Post.3484b530.js"><link rel="prefetch" href="/assets/Tags.61676cf8.js">
    <link rel="stylesheet" href="/assets/style.d9da5232.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header class="navbar invert"><span><a href="/" class=""><span class="site-name">BWLLzlx的个人博客</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--><!----><span>首页</span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="基础"><span class="title"><!----><span>基础</span></span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="基础"><span class="title"><!----><span>基础</span></span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/base/h5c3/html.md" class="" aria-label="h5c3"><!--[--><!--]--><!----><span>h5c3</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/base/js/js基础.md" class="" aria-label="js"><!--[--><!--]--><!----><span>js</span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue框架"><span class="title"><!----><span>Vue框架</span></span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue框架"><span class="title"><!----><span>Vue框架</span></span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/vue/vue.md" class="" aria-label="vue"><!--[--><!--]--><!----><span>vue</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vue/nuxt.md" class="" aria-label="服务端渲染"><!--[--><!--]--><!----><span>服务端渲染</span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工程化"><span class="title"><!----><span>工程化</span></span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工程化"><span class="title"><!----><span>工程化</span></span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/engineer/docker.md" class="" aria-label="docker"><!--[--><!--]--><!----><span>docker</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/engineer/webpack.md" class="" aria-label="webpack"><!--[--><!--]--><!----><span>webpack</span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="知识体系完善"><span class="title"><!----><span>知识体系完善</span></span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="知识体系完善"><span class="title"><!----><span>知识体系完善</span></span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/pro/浏览器.md" class="" aria-label="浏览器"><!--[--><!--]--><!----><span>浏览器</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/pro/http.md" class="" aria-label="http协议"><!--[--><!--]--><!----><span>http协议</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/pro/WebSocket.md" class="" aria-label="WebSocket协议"><!--[--><!--]--><!----><span>WebSocket协议</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/pro/设计模式.md" class="" aria-label="设计模式"><!--[--><!--]--><!----><span>设计模式</span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--><div class="navbar-item"><a style="cursor:pointer;"><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 2c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9zm0 16c3.867 0 7-3.133 7-7 0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7zm8.485.071l2.829 2.828-1.415 1.415-2.828-2.829 1.414-1.414z"/></svg></span><span>Search</span></a></div></nav><!--[--><!--]--><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--><!----><span>首页</span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="基础"><span class="title"><!----><span>基础</span></span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="基础"><span class="title"><!----><span>基础</span></span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/base/h5c3/html.md" class="" aria-label="h5c3"><!--[--><!--]--><!----><span>h5c3</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/base/js/js基础.md" class="" aria-label="js"><!--[--><!--]--><!----><span>js</span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue框架"><span class="title"><!----><span>Vue框架</span></span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue框架"><span class="title"><!----><span>Vue框架</span></span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/vue/vue.md" class="" aria-label="vue"><!--[--><!--]--><!----><span>vue</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/vue/nuxt.md" class="" aria-label="服务端渲染"><!--[--><!--]--><!----><span>服务端渲染</span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工程化"><span class="title"><!----><span>工程化</span></span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工程化"><span class="title"><!----><span>工程化</span></span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/engineer/docker.md" class="" aria-label="docker"><!--[--><!--]--><!----><span>docker</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/engineer/webpack.md" class="" aria-label="webpack"><!--[--><!--]--><!----><span>webpack</span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="知识体系完善"><span class="title"><!----><span>知识体系完善</span></span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="知识体系完善"><span class="title"><!----><span>知识体系完善</span></span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/pro/浏览器.md" class="" aria-label="浏览器"><!--[--><!--]--><!----><span>浏览器</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/pro/http.md" class="" aria-label="http协议"><!--[--><!--]--><!----><span>http协议</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/pro/WebSocket.md" class="" aria-label="WebSocket协议"><!--[--><!--]--><!----><span>WebSocket协议</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/pro/设计模式.md" class="" aria-label="设计模式"><!--[--><!--]--><!----><span>设计模式</span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--><div class="navbar-item"><a style="cursor:pointer;"><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 2c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9zm0 16c3.867 0 7-3.133 7-7 0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7zm8.485.071l2.829 2.828-1.415 1.415-2.828-2.829 1.414-1.414z"/></svg></span><span>Search</span></a></div></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><div class="page-content"><!--[--><div class="show-catalog post-wrapper"><div class="article-header post-header" style=""><!----><div class="article-header-content"><!----><h1 class="article-title">JS面试精选</h1><p class="article-subtitle">JS面试常用知识</p><div class="article-icons"><div class="article-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"/></svg><span>BWLLzlx</span></div><!----><div class="article-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M17.618 5.968l1.453-1.453 1.414 1.414-1.453 1.453a9 9 0 11-1.414-1.414zM12 20a7 7 0 100-14 7 7 0 000 14zM11 8h2v6h-2V8zM8 1h8v2H8V1z"/></svg><span>59 min</span></div></div></div><!----></div><main class="page post-content"><!--[--><!--]--><div class="theme-gungnir-content"><!--[--><!--]--><div><h3 id="模块化" tabindex="-1"><a class="header-anchor" href="#模块化" aria-hidden="true">#</a> 模块化</h3><p>模块化开发方式可以提高代码复用率，并且作用域独立。开发中主要用到的是 <strong>CommonJS 和 ES Module</strong>。</p><h4 id="commonjs" tabindex="-1"><a class="header-anchor" href="#commonjs" aria-hidden="true">#</a> CommonJS</h4><p>Node.js 是 commonJS 规范的主要实践者</p><p>CommonJS 使用 module.exports、exports 导出；使用 require 导入</p><ul><li>导出：<strong>module 是个对象，这个对象就代表当前模块</strong>，包括属性 id、filename、parent、children、loaded、exports 表示模块对外输出的值。而 exports 变量<strong>其实指向的就是 module.exports</strong></li><li>导入：因为 exports 就是个对象，所以用 require 就相当于是获取那个对象了。require 可以<strong>加在代码的任意位置</strong></li></ul><h4 id="esmodule" tabindex="-1"><a class="header-anchor" href="#esmodule" aria-hidden="true">#</a> ESModule</h4><p>ES6 在语言标准的层面上，旨在成为浏览器和服务器通用的模块解决方案。<strong>ES Module 中 export 导出的是接口</strong></p><ul><li>导出： <ul><li>export 变量，也可以在声明的时候导出，甚至可以<strong>as 别名</strong></li><li>export default 变量：使用 import 的时候，用户<strong>需要知道所加载的变量名或函数名</strong>，否则无法加载。为了给用户提供方便，让他们不用阅读文档就能加载模块，就要用到 export default 命令，为模块指定默认输出。相当于<strong>就是输出一个叫做 default 的变量</strong>，export default a 就相当于把 a 赋值给 default 变量，所以后面不能有声明</li></ul></li><li>导入： <ul><li>export 的变量：需要加上{}, 且命名要和导出 声明中的保持一致</li><li>export default 的变量：不用加{}, 并且命名可以任意</li></ul></li></ul><p>import（）方法：调用后得到一个 Promise 对象，可以用 then()，回调中可以拿到的参数是 module 对象，也就是 export 的各个属性组成的对象。<strong>import()函数可以用在任何地方，它和 CommonJS 的 require 方法类似，是运行时执行，所以是放在方法或者表达式里面的</strong></p><h4 id="两者的区别" tabindex="-1"><a class="header-anchor" href="#两者的区别" aria-hidden="true">#</a> 两者的区别</h4><ul><li>CommonJS：module.exports 表示模块对外输出的值，<strong>是个对象</strong>。require 第一次加载，就会执行 js 代码，然后在内存生成一个对象，这个对象<strong>在运行时才生成</strong>。后续再有 require（模块）就是直接在那个拷贝的对象获取，不会再执行那个模块</li><li>ESModule：<strong>ES6 模块不是对象</strong>，编译时加载</li></ul><h3 id="数据类型" tabindex="-1"><a class="header-anchor" href="#数据类型" aria-hidden="true">#</a> 数据类型</h3><h4 id="数据类型分类" tabindex="-1"><a class="header-anchor" href="#数据类型分类" aria-hidden="true">#</a> 数据类型分类</h4><ul><li>值类型：String、Number、Boolean、Null、Undefined。<strong>栈内存</strong></li><li>引用类型：Object、Array、Function。<strong>本身放堆，地址放栈</strong></li></ul><h4 id="数据类型转换" tabindex="-1"><a class="header-anchor" href="#数据类型转换" aria-hidden="true">#</a> 数据类型转换</h4><ul><li>转成 String：toString（）、String（）、相加特性</li><li>转成 Number：parseInt（）获取整数，如果开头不是数字会 NaN、parseFloat（）、Number（）、减乘除</li><li>转成 Boolean：Boolean（）</li></ul><h4 id="数据类型判断" tabindex="-1"><a class="header-anchor" href="#数据类型判断" aria-hidden="true">#</a> 数据类型判断</h4><ul><li>typeof：能判断基础类型，但不能判断具体类型，<strong>null、数组都只会得到 object，无法判断清楚</strong></li><li>instance of：判断一个对象<strong>是否一个类的实例</strong>，也就是判断<strong>类的显式原型是否在对象的隐式原型链上</strong>。需要<strong>建立在知道后面的类的基础上</strong></li><li>constructor：函数的 prototype 指向原型对象，原型对象的 constructor 指向函数，<strong>函数的实例会有原型对象的内容</strong>，所以函数的实例对象会有 constructor 指向构造函数。<strong>所以调用 constructor 可以得到构造函数</strong>。但 null 和 undefined 不能调用 constructor</li><li><strong>Object.prototype.toString.call：也就是获取 toString 方法让后面的参数来调用，然后就能看到[object XXX]。完美方案，自定义的类不行罢了</strong></li><li>isArray：判断是不是数组</li></ul><h4 id="深拷贝与浅拷贝" tabindex="-1"><a class="header-anchor" href="#深拷贝与浅拷贝" aria-hidden="true">#</a> 深拷贝与浅拷贝</h4><p>区别：</p><ul><li>浅拷贝：会跟着变</li><li>深拷贝：不会跟着变</li></ul><p>深拷贝的代码实现：</p><ul><li>使用 JSON 的 stringify 和 parse，先用 stringify 创建一个 string，再创建一个对象，返回这个对象</li><li>写一个递归方法，传入 obj，返回 cloneObj。创建一个 cloneObj，判断是对象还是数组进行初始化。然后遍历 obj，判断 typeof obj[key]是不是 object，如果是就给 cloneObj[key]赋值递归调用的结果，不是就给 cloneObj 添加属性</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">deep1</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">deep2</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> cloneObj <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//对象</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//for in的一个问题就是会遍历所有属性，包括原型链上的，所以用hasOwnProperty判断是否属性</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    cloneObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deep2</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                    cloneObj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//数组</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token function">deep2</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//函数</span>
    <span class="token keyword">else</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token keyword">return</span> obj
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> cloneObj
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="手写-instanceof" tabindex="-1"><a class="header-anchor" href="#手写-instanceof" aria-hidden="true">#</a> 手写 instanceof</h4><p>功能：判断<strong>是不是某个类的实例</strong>，是就返回 true，不是就返回 false</p><p>实现思路：用原型链。获取构造函数的显式原型，判断显式原型是否等于当前实例的隐式原型，如果不等于就继续查找原型链，直到它的隐式原型链为 null（）</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">myInstanceOf</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> fun</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//如果是基本数据类型中的非object，那就都返回false</span>
  <span class="token keyword">const</span> baseType <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;number&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;symbol&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;BigInt&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>baseType<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> p <span class="token operator">=</span> obj<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>
  <span class="token comment">//顺着原型链找</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//等于，也就是找到了</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">===</span> fun<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//找到最后，也就是Object.prototype的__proto__为null</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//隐式原型链移动</span>
    p <span class="token operator">=</span> p<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="数组" tabindex="-1"><a class="header-anchor" href="#数组" aria-hidden="true">#</a> 数组</h3><h4 id="创建数组" tabindex="-1"><a class="header-anchor" href="#创建数组" aria-hidden="true">#</a> 创建数组</h4><ul><li>new Array（），可以传一个参数 n 生成长度为 n 的数组，也可以传多个</li><li>用字面量[]</li><li>array.of(若干个数)</li></ul><h4 id="数组方法" tabindex="-1"><a class="header-anchor" href="#数组方法" aria-hidden="true">#</a> 数组方法</h4><p>头尾添加删除</p><ul><li>push：向末尾添加若干个值，返回新的长度</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myPush</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> length <span class="token operator">=</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">[</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">]</span> <span class="token operator">=</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>pop：删除最后一个，返回数组的最后一个元素，也就是删掉的那个</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myPop</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> deleteValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> deleteValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>shift：删除第一个，返回数组的第一个元素</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myShift</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> deleteValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> deleteValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>unshift：向开头添加若干个值，返回新的长度</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myShift</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">let</span> argsLength <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>len<span class="token punctuation">,</span> argsLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> len <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">+</span> argsLength<span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> argsLength<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i <span class="token operator">-</span> argsLength<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> argsLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加删除替换</p><ul><li>splice：在【指定位置】开始删除【几个】，然后在这个位置插入【若干个新值】。返回的结果就是原本的数组，<strong>修改原数组</strong></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">mysplice</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> index <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//第一个参数</span>
  <span class="token keyword">let</span> num <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//第二个参数</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">//没传插入的元素，拼接返回新数组</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>index <span class="token operator">+</span> num<span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      content<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> arr
        <span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>index <span class="token operator">+</span> num<span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>连接与分割</p><ul><li>concat：连接若干个数组，返回<strong>新的数组</strong></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myConcat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>join：用传入的参数，将数组每一项分开形成字符串，字符串内数组元素的分割就靠传入的参数。返回<strong>新的结果</strong></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myJoin</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">divider</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> joinResult <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  divider <span class="token operator">=</span> divider <span class="token operator">?</span> divider <span class="token operator">:</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      joinResult <span class="token operator">=</span> joinResult <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      joinResult <span class="token operator">+=</span> divider <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> joinResult<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>排序：</p><ul><li>sort：<strong>需要传入一个函数</strong>，传入两个参数 a 和 b，返回 a-b 表示从小到大，返回 b-a 表示从大到小。也可以指定根据对象的某个属性排序。封装一个函数 outer，可以传入参数 X，然后 return 的是一个函数 inner，inner 返回 a[X] - b[X]。<strong>修改原函数</strong></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">quickSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> arr<span class="token punctuation">;</span>

  <span class="token keyword">let</span> index <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> center <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> center<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      left<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      right<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">quick</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>pivot<span class="token punctuation">,</span> <span class="token function">quick</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>遍历数组执行操作：</p><ul><li>map：每个元素执行函数，<strong>返回新的数组</strong>。函数包括参数 item、index、arr</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myMap</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//item, index, arr</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>forEach：每个元素执行函数，<strong>返回 undefined</strong>。和 for 比，<strong>无法提前结束</strong>，会跳过空值，循环次数取决于开始的长度，不会动态改变 <ul><li>想要提前结束就在 forEach 外部使用 try-catch，然后当想要结束的时候 throw new Error，然后在 catch 判断是真 error 还是跳出</li></ul></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myForEach</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>filter：返回每个回调的返回为 true 的元素组成的<strong>新数组</strong></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myFilter</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> tem <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> tem<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> tem<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>every：每个元素的回调都返回 true 就返回 true，否则返回 false</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myEvery</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>some：只要有元素的回调为 true 就返回 true</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">mySome</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>reduce：参数包括回调和初始值。每次回调取出 2 个值进行计算，返回一个值，直到数组长度为 1。因为<strong>reduce 可以用之前的结果进行后续的计算</strong>，所以可以用来进行相加、统计出现的次数、去重。参数</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myReduce</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> base</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//保存原数组</span>
  <span class="token keyword">let</span> initarr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token comment">//用于操作的数组</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> initarr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//初始值</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>base<span class="token punctuation">)</span> arr<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>base<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> index<span class="token punctuation">,</span> newValue<span class="token punctuation">;</span>

  <span class="token comment">//只要操作的数组还没到一个数，就一直操作</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    index <span class="token operator">=</span> initarr<span class="token punctuation">.</span>length <span class="token operator">-</span> arr<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    newValue <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> initarr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> newValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>截取：</p><ul><li>slice：一个参数 k 就从 k 到结束，两个参数从前到后。返回新数组。<strong>支持负数，表示从后数起</strong></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myslice</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  start <span class="token operator">=</span> start <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> start<span class="token punctuation">;</span>
  end <span class="token operator">=</span> end <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> arr<span class="token punctuation">.</span>length <span class="token operator">:</span> end <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">?</span> end <span class="token operator">:</span> arr<span class="token punctuation">.</span>length <span class="token operator">+</span> end<span class="token punctuation">;</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查找：</p><ul><li>includes：是否包含，返回 true 或 false</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myincludes</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">let</span> k <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">?</span> index <span class="token operator">:</span> arr<span class="token punctuation">.</span>length <span class="token operator">+</span> index<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">===</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>indexOf：寻找某元素第一次出现的位置。可以用第二个参数指定开始的数组下标</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myIndexOf</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>lastIndexOf</p></li><li><p>find：查询第一个符合条件的<strong>元素的值</strong>，不存在返回 undefined</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myFind</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>findIndex：查询第一个符合条件的<strong>元素的位置</strong>，不存在返回-1。和 indexOf 的区别是：indexOf 可以指定开始的位置、indexOf 通常用于查找值类型</li></ul><p>颠倒：</p><ul><li>reverse，返回新数组</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myReverse</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">let</span> newArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    newArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>len <span class="token operator">-</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> newArr<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>填充数组：</p><ul><li>fill。可以接收三个参数，第一个是值，后面是起始位置和结束位置，改变原数组</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myFill</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  start <span class="token operator">=</span> start <span class="token operator">?</span> start <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  end <span class="token operator">=</span> end <span class="token operator">?</span> end <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> end<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改原数组：</p><ul><li>copyWithin：可传入三个参数，从哪里开始粘贴、开始复制的位置（可以是负数表示从最后开始数）、结束的位置，会改变原数组</li></ul><p>降维：</p><ul><li>flat：传入参数降多少维。返回新数组。从内向外降。会把稀疏数组变成普通数组</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myFlat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">count <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//是数组就递归，如果传入0就会返回数组本身，concat数组就会降维</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">myFlat</span><span class="token punctuation">(</span>count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      res <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>把可迭代对象转数组：</p><ul><li>from</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Array<span class="token punctuation">.</span><span class="token function-variable function">myFrom</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">temp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>判断是不是数组：</p><ul><li>isArray</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Array<span class="token punctuation">.</span><span class="token function-variable function">isArray</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">temp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;[object,Array]&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建数组</p><ul><li>of</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Array<span class="token punctuation">.</span><span class="token function-variable function">myOf</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取元素：</p><ul><li>entries。返回一个新的 Array Iterator 对象，该对象包含数组中每个索引的键/值对</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//手写的方法无法使用for of 不能正常执行，我们需要添加Symbol.iterator方法返回next即可实现</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">entries</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token constant">O</span> <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> length <span class="token operator">=</span> <span class="token constant">O</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token punctuation">[</span>index<span class="token punctuation">,</span> <span class="token constant">O</span><span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    next<span class="token punctuation">,</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        next<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="遍历数组" tabindex="-1"><a class="header-anchor" href="#遍历数组" aria-hidden="true">#</a> 遍历数组</h4><ul><li>for of：<strong>i 是数组元素</strong></li><li>for：i 是数组下标</li><li>forEach：i 是数组元素</li><li>for in：<strong>不适合用于遍历数组，因为 i 是下标</strong>。而且用 forin 来遍历数组，会把可枚举属性都迭代了，包括原型的 name 和方法</li></ul><h3 id="函数" tabindex="-1"><a class="header-anchor" href="#函数" aria-hidden="true">#</a> 函数</h3><h4 id="闭包" tabindex="-1"><a class="header-anchor" href="#闭包" aria-hidden="true">#</a> 闭包</h4><ul><li>产生：函数 a 中<strong>嵌套</strong>函数 b，在 b 中<strong>引用</strong>了 a 定义的变量，在外部<strong>调用</strong>了函数 a</li><li>作用： <ul><li>局部变量存放在栈当中，函数执行完之后局部变量会被立即释放，<strong>闭包使变量得以活下来</strong></li><li>让<strong>a 中的变量可以被全局作用域操作</strong>，通过 b 操作 a 的变量</li></ul></li><li>生命周期： <ul><li>创建：在调用执行外部函数的时候，内部函数创建</li><li>死亡：内部函数成为垃圾对象的时候死亡，也就是没有引用指向它了</li></ul></li><li>使用案例：<strong>向函数外暴露内部函数 b</strong>（也就是函数 a 返回内部函数 b）使得在全局作用域能够操作外部函数 a 的变量</li><li>缺点：执行完之后函数内的局部变量<strong>没有释放</strong>，造成<strong>内存泄漏</strong></li></ul><h4 id="原型与原型链" tabindex="-1"><a class="header-anchor" href="#原型与原型链" aria-hidden="true">#</a> 原型与原型链</h4><ul><li><p>功能：<strong>让某个函数的所有实例对象都能使用原型对象中的属性和方法</strong>，相当于类方法定义在原型对象上</p></li><li><p>理解：每个<strong>函数</strong>都有一个 prototype 属性，指向一个原型对象，函数的每个实例有个__proto__都会指向该原型对象。原型对象是也对象，所以它的__proto__也指向它的构造函数的原型对象，也就是 Object 函数的原型对象，暂时称之为 X。X 也是对象，但它的__proto__的指向是 null</p></li><li><p>结论：<strong>实例的隐式原型等于构造函数的显示原型</strong></p></li><li><p>设置与读取：</p><ul><li>给某个实例对象设置方法：设置到本身</li><li>读取某个实例的方法：先找本身有没有，没有就去找它的隐式原型所指向的原型对象上是否有这个方法 ，还是没有就顺着继续找</li></ul></li><li><p>Function 与 Object 的 instance of。先找显示原型，再找隐式原型链</p><ul><li>F F：F 的显示原型是 F.prototype。F 的隐式原型是它构造函数的 prototype，而 F 的构造函数是 F。相等了，所以 true</li><li>F O：O 的显示原型是 O.prototype。F 的隐式原型是它构造函数的 prototype，而 F 的构造函数是 F。不相等，继续找。F 的 prototype 是对象，它的隐式原型是它它构造函数的 prototype，也就是 O.prototype。相等了，所以 true</li><li>O F：F 的显示原型是 F.prototype。O 的隐式原型是它构造函数的 prototype，这里的 O 是个函数实例，所以它构造函数是 F。相等了，所以 true</li><li>O O：O 的显示原型是 O.prototype。O 的隐式原型是它构造函数的 prototype，这里的 O 是个函数实例，所以它构造函数是 F，所以是 F.prototype。不相等，继续找。F 的 prototype 是对象，它的隐式原型是它它构造函数的 prototype，也就是 O.prototype。相等了，所以 true</li></ul></li></ul><h4 id="立即执行函数" tabindex="-1"><a class="header-anchor" href="#立即执行函数" aria-hidden="true">#</a> 立即执行函数</h4><ul><li>格式：（function（）{}）（）</li><li>作用：<strong>创建独立的作用域</strong>，不会命名冲突，实现块级作用域</li></ul><h3 id="对象" tabindex="-1"><a class="header-anchor" href="#对象" aria-hidden="true">#</a> 对象</h3><h4 id="创建对象" tabindex="-1"><a class="header-anchor" href="#创建对象" aria-hidden="true">#</a> 创建对象</h4><ul><li>new Object（）：可传入任意参数。如果传入对象等价于传引用</li><li>字面量{}</li><li>Object.create()：<strong>第一个参数必须，为创建出来的对象的原型。第二个参数为对象实例的配置对象</strong></li></ul><h4 id="object-属性" tabindex="-1"><a class="header-anchor" href="#object-属性" aria-hidden="true">#</a> Object 属性</h4><ul><li>length：值为 1</li><li>prototype：Object 函数的原型对象</li></ul><h4 id="object-方法" tabindex="-1"><a class="header-anchor" href="#object-方法" aria-hidden="true">#</a> Object 方法</h4><ul><li><p>assign：<strong>第一个参数作为目标对象，后续都是源</strong>。将所有可枚举属性的值若干对象复制到目标对象，返回目标对象。可以用{...target, ...source}来实现同样的功能</p></li><li><p>create</p></li><li><p>hasOwnProperty：判断是否为自身本身的属性，不看原型链</p></li><li><p>defineProperty：在对象上定义或者修改对象 obj 中的属性，结果返回 obj。<strong>三个参数：目标、属性、描述符</strong>。使用场景：Vue 实现数据绑定</p><ul><li>描述符的属性： <ul><li>通用： <ul><li>configurable：属性是否可改变、删除</li><li>enumerable：是否可枚举</li></ul></li><li>数据专有： <ul><li>value：默认值</li><li>writable：对象是否能重写</li></ul></li><li>存取专有： <ul><li>getter</li><li>setter</li></ul></li></ul></li></ul></li><li><p>entries：<strong>返回二维数组</strong>，一维是属性的 key 和 fvalue，二维存各个属性。可用于把对象转成 map</p></li><li><p>keys</p></li><li><p>values</p></li><li><p>freeze：让对象不能添加属性、原型也不能修改，<strong>甚至不能被修改。3 级</strong></p></li><li><p>getOwnPropertyDescriptor：获取描述符</p></li><li><p>getOwnPropertyNames：获取属性名的数组</p></li><li><p>getPrototypeOf：获取原型对象</p></li><li><p>is：判断是否相同，不会做隐式类型转换（或者说强制类型转换，在两边类型不同的时候把类型转成 Number）</p><ul><li>is 和===差不多：但是 is 的话，NaN = NaN 是 true，+0 = -0 是 false。这两点和===完全相反</li><li>==和===：一个是严格比较运算符，也就是不会做强制类型转换。</li></ul></li><li><p>isExtensible：判断是否可扩展。被冻结了就不能扩展了</p></li><li><p>isFrozen：判断是否冻结</p></li><li><p>seal：把 configurable 改成 false，调用 Object.preventExtensions，不可扩展不可配置。<strong>2 级</strong></p></li><li><p>preventExtensions：防止对象新增属性、原型重新赋值，不可扩展。<strong>1 级</strong></p></li></ul><h4 id="封装类方法" tabindex="-1"><a class="header-anchor" href="#封装类方法" aria-hidden="true">#</a> 封装类方法</h4><p>String：</p><p>创建过程：**创建一个临时变量 temp = new String（）**把简单类型包装为复杂类型，把 temp 赋值给原来的 String 类型变量，再销毁 temp。如果给变量重新赋值，会在堆重新开辟一块空间然后修改栈内存的地址为新空间的地址，String 本身的内容是不会改变的</p><ul><li><p>indexOf（字符）、lastIndexOf（）获取字符的位置，没有就返回-1</p></li><li><p>charAt（index）根据 index 获取字符串对应位置的内容</p></li><li><p>charCodeAt（index）根据 index 获取字符串对应位置的 ASCII 码，可以判断用户按下了哪个键，例如如果是 97（a）就怎么操作</p></li><li><p>concat（）拼接，相当于+</p></li><li><p>substr（begin，length）截取字符串</p></li><li><p>replace（被替换的，去替换的），只替换一个</p></li><li><p>split（分隔符）转为数组，把分隔符去掉</p></li><li><p>toUpperCase（）、toLowerCase（）变换大小写</p></li><li><p>trim()、trimStart、trimEnd</p></li></ul><p>Date：</p><ul><li>Date（）构造函数，new 创建日期对象，不传参是获取当前系统时间，参数可以是年月（从 0 开始）日的数字，可以是字符串（yyyy-mm-dd h：m：s）</li><li>getFullYear（）、getMonth（）（0-11）、getDate（）、getDay（）（周日是 0）、getHours（）、getMinutes（）、getSeconds（）</li><li>获取距离 1970.1.1 的毫秒（时间戳）：valueOf（）、getTime（）、直接 var x = +new Date（）（+和 new 连着）、直接 Date.now（）</li><li>倒计时效果的实现：通过 now（）和+new Date（一个指定的时间例如&#39;2022-6-1 00:00:00&#39;）相减，然后计算出 d、h、m、s</li></ul><p>Number：</p><ul><li>isFinite（）：判断是否有限数</li><li>isNaN（）</li><li>parseInt（）、parseFloat（）</li></ul><p>Math：</p><ul><li>trunc（）：抹除小数</li><li>sign（）：判断正负零</li></ul><h4 id="遍历对象" tabindex="-1"><a class="header-anchor" href="#遍历对象" aria-hidden="true">#</a> 遍历对象</h4><ul><li>for in，还会得到<strong>对象原型链</strong>上的属性。想要筛选出自己的靠 hasOwnProperty</li><li>keys、values</li><li>getOwnPropertyNames：把对象的属性转成一个数组，然后用 forEach</li><li>Reflect.ownKeys：获取对象的所有自身属性的数组</li></ul><h4 id="this" tabindex="-1"><a class="header-anchor" href="#this" aria-hidden="true">#</a> this</h4><ul><li><p>通常 this 指向调用该方法的对象。方法没有被谁调用那就是被 window 调用</p></li><li><p>箭头函数中没有 this 值，内部 this 的指向，和本身<strong>声明时所在作用域</strong>的 this 一样，也就是本身所在作用域的上一级。没有 arguments，想要获取就要靠扩展运算符。没有 prototype。不能作为构造器。更适用于那些本来需要匿名函数的地方</p></li><li><p>call（）、apply（）、bind（）可以改变 this 指针的指向。如果有传递对象，那么会强制把 this 指向对象。但是不能指向箭头函数的 this 指向</p><ul><li>call 后面有参数 arg1，arg2，函数立即执行</li><li>apply 之后的参数为一个数组 arguments，函数立即执行</li><li>bind 返回一个新的函数，函数不会立即执行</li></ul></li><li><p>事件的响应函数中，this 表示触发响应的 dom 对象</p></li></ul><h4 id="new" tabindex="-1"><a class="header-anchor" href="#new" aria-hidden="true">#</a> new</h4><p>用 new 创建对象的实际过程：创建一个新的空的对象，然后 this 指向新对象，this.__proto__ = Fn.prototype。对象调用构造函数进行赋值，然后<strong>自动返回 this 指向的对象</strong>，如果手动 return 基本类型，返回值类型不会被改，如果是引用类型就会被改</p><p>手写 new：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//因为原本是new XXX，现在写成函数，就传入参数</span>
<span class="token keyword">function</span> <span class="token function">myNew</span><span class="token punctuation">(</span><span class="token parameter">constructor<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//新建空对象</span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">//对象隐式原型指向构造函数的显示原型</span>
  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>

  <span class="token comment">//调用构造函数</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">constructor</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> result <span class="token operator">?</span> result <span class="token operator">:</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="继承方式" tabindex="-1"><a class="header-anchor" href="#继承方式" aria-hidden="true">#</a> 继承方式</h4><p>原型链继承</p><ul><li>如果<strong>想让实例用别的类的方法</strong>只需要 XXX.prototype = new YYY（），实例 xxx 找方法的时候会去找 YYY 的原型链。还要<strong>加上 XXX.prototype.constructor = XXX</strong>，否则 XXX 的实例 xxx 在找 XXX 的时候会找到 YYY 的 prototype 的 constructor 指向 YYY 而不是 XXX</li><li>缺点： <ul><li>没法多继承</li><li>例如实例对象有数组放在原型对象中，如果修改、添加元素到数组，就会影响其他的实例对象。所以通常函数放在原型对象，属性不妨，不乱修改</li></ul></li></ul><p>构造函数继承</p><ul><li>通过 Father.call（this），用当前对象调用父类的构造函数去给自己赋值</li><li>缺点：只能继承父类的实例属性和方法，不能继承原型上的属性和方法</li></ul><p>组合继承</p><ul><li>就是又通过原型绑定父类的实例，又给自己的构造函数里面写 call 的方式。为什么这样能解决原型链继承的问题呢？是因为自己<strong>本身已经通过父构造函数让自身拥有了这个属性，所以不会去改原型链的</strong></li><li>缺点：实际上调用了两次父类构造函数。第一次是绑定子函数的原型的时候，第二次是调用父类构造函数去添加属性。 <ul><li>优化：可以用 Object.create（Parent.prototype）来代替 new Parent，就成了寄生组合继承</li></ul></li></ul><p>实例继承</p><ul><li>通过 Object.create（），传入参数去设置对象的原型。但是这样几个创建出来的对象的原型还是同一个，缺点就是会影响，和原型链一样的。也就是<strong>浅拷贝</strong></li></ul><p>寄生式继承</p><ul><li>先通过实例继承获得原型，然后给实例添加方法</li></ul><p><strong>寄生组合继承</strong></p><ul><li>组合继承改造，用 Object.create（Parent.prototype）来代替 new Parent 去优化原型链的绑定</li></ul><p>ES6 的 extends 的实现方式</p><ul><li>在字类的 constructor 里，使用 super（参数）就相当于调用父类的 constructor</li></ul><h4 id="手写继承" tabindex="-1"><a class="header-anchor" href="#手写继承" aria-hidden="true">#</a> 手写继承</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//原型链继承</span>
<span class="token keyword">function</span> <span class="token function">Father1</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Father1</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Son1</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Son1</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Son1</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Son1<span class="token punctuation">;</span>
<span class="token keyword">let</span> son1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son1</span><span class="token punctuation">(</span><span class="token string">&quot;原型链继承&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
son1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//构造函数继承</span>
<span class="token keyword">function</span> <span class="token function">Father2</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Father2</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Son2</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Father2</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> son2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son2</span><span class="token punctuation">(</span><span class="token string">&quot;构造器继承&quot;</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son2<span class="token punctuation">)</span><span class="token punctuation">;</span>
son2<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//会报错，没有方法</span>

<span class="token comment">//组合继承</span>
<span class="token keyword">let</span> father3counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Father3</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  father3counter<span class="token operator">++</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>father3counter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Father3</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Son3</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Father3</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//这里又创建了一次</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Son3</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//这里创建了一次</span>
<span class="token class-name">Son3</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Son3<span class="token punctuation">;</span>

<span class="token keyword">let</span> son3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son3</span><span class="token punctuation">(</span><span class="token string">&quot;组合继承&quot;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son3<span class="token punctuation">)</span><span class="token punctuation">;</span>
son3<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//寄生组合继承</span>
<span class="token comment">//对组合继承进行修改，不要new Father()，而是用Object.create，传入Father.prototype，就能获取原型方法</span>

<span class="token comment">//实例继承</span>
<span class="token keyword">let</span> father5 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;实例继承&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">friends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> son5_1 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>father5<span class="token punctuation">)</span><span class="token punctuation">;</span>
son5_1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;儿子名字&quot;</span><span class="token punctuation">;</span>
son5_1<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;好友1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son5_1<span class="token punctuation">.</span>friends<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> son5_2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>father5<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son5_2<span class="token punctuation">.</span>friends<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//是一样的，也就是浅拷贝</span>

<span class="token comment">//寄生继承</span>
<span class="token comment">//先实例继承，然后给create的对象添加方法</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="手写-bind、call、apply" tabindex="-1"><a class="header-anchor" href="#手写-bind、call、apply" aria-hidden="true">#</a> 手写 bind、call、apply</h4><p>call：</p><ul><li>参数：想要调用方法的对象、其他参数</li><li>作用：让传入的对象调用【调用 call 函数的方法】</li><li>返回值：函数执行的结果</li><li>思路：获取函数对象，获取调用的对象，获取其他参数，使用调用者执行函数</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myCall</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//获取参数</span>
  <span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token comment">//分出调用的对象和其他参数</span>
  <span class="token keyword">const</span> obj <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//获取函数对象</span>
  obj<span class="token punctuation">.</span>fun <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

  <span class="token comment">//调用函数</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">//删除，防止闭包导致内存泄露</span>
  obj<span class="token punctuation">.</span>fun <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token comment">//返回</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>apply</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myApply</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> obj <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span>fun <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//不同点，只传入一个参数</span>
  obj<span class="token punctuation">.</span>fun <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>bind</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">mybind</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> obj <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> fun <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

  <span class="token comment">//不会立即执行fun，而是封装返回。调用返回结果就会执行obj调用fun</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fun</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="bom" tabindex="-1"><a class="header-anchor" href="#bom" aria-hidden="true">#</a> BOM</h3><h4 id="window-包括所有" tabindex="-1"><a class="header-anchor" href="#window-包括所有" aria-hidden="true">#</a> window 包括所有</h4><ul><li>document：<strong>DOM 的最根本的对象，是 BOM 的 window 对象的子对象。可以说 BOM 包含了 DOM。用于处理页面文档，有很多 api 方法</strong></li><li>location：主要是搜索栏 <ul><li>hash：从井号开始的 url</li><li>host：ip 地址/主机名+端口号</li><li>hostname：主机名</li><li>port：端口号</li><li>href：完整 url</li><li>pathname：主机名端口号后面的</li><li>protocol：协议</li><li>search：？之后的内容（参数）</li><li>assign（url）：加载文档</li><li>reload（）</li><li>replace（url）</li></ul></li><li>navigator：略，主要是浏览器的信息</li><li>screen：包含有关客户端显示屏幕的信息，主要能用 height、width、availHeight、availWidth</li><li>history：back()、forward()、go（数字）</li><li>frames：包括 stats、defaultStatus、name，<strong>和 window</strong></li></ul><h4 id="window-自己" tabindex="-1"><a class="header-anchor" href="#window-自己" aria-hidden="true">#</a> window 自己</h4><p>常用函数：</p><ul><li>isSecureContext：判断当前窗口是不是在加密环境，HTTPS 返回 true</li><li>alert</li><li>prompt</li><li>confirm</li><li>open</li><li>close：通常只用来关闭 open 打开的窗口</li><li>scrollTo</li><li>scrollBy</li><li>print：和按 ctrl + p 一样</li><li>focus：激活窗口，使其获得焦点，出现在其他窗口的前面</li><li>getSelection：获取用户选中，用 toString 可以获取文本</li><li>requestAnimationFrame：用于执行动画</li><li>resizeTo(width,height)</li></ul><p>常用属性：</p><ul><li>devicePixelRatio：css/物理像素</li><li>scrollX/Y：滚动条位置</li></ul><h3 id="dom" tabindex="-1"><a class="header-anchor" href="#dom" aria-hidden="true">#</a> DOM</h3><h4 id="dom-操作流程" tabindex="-1"><a class="header-anchor" href="#dom-操作流程" aria-hidden="true">#</a> DOM 操作流程</h4><ol><li><p>获取元素/节点</p><ul><li><p>querySelectot、getElementById、getElementsByClassName……</p></li><li><p>parentNode、children、nextSibling、nextElementSibling</p></li></ul></li><li><p>指定事件类型</p><p>事件种类</p><ul><li>click、dblclick、mousemove、mouseout、mouseover、focus、blur、mouseup、mousedown、contextmenu、selectStart <ul><li>mouseover 和 mouseenter 有什么区别：mouseenter 事件只触发一次，mouseover 事件会在子节点上触发多次</li><li>event 的属性： <ul><li>clientX、clientY：鼠标相对于可视窗口的坐标</li><li>offsetX、offsetY：鼠标相对事件源，也就是 target 的坐标</li><li>pageX、pageY：鼠标相对于页面文档 document 的坐标。可用于设置鼠标跟随</li></ul></li></ul></li><li>keyup、keydown、keypress（需要产生字符才能触发所以 alt 这些功能键不能触发，只能捕获单个）。顺序 down - press - up</li></ul><p>事件流</p><ul><li>给某个元素注册了事件，捕获阶段从 window 开始一层一层往下传播点击事件，有回调就执行。找到之后依次把事件传播上去。只能执行<strong>捕获阶段或者冒泡阶段</strong>，通过 useCapture 设置，<strong>true 是捕获阶段，不然默认冒泡</strong>。onclick 只有冒泡，而 onblur、onfocus、onmousemove、onmouseout 没有冒泡</li><li>stopPropagation()阻止捕获和冒泡阶段中当前事件的进一步传播</li><li>preventDefault()阻止事件默认行为而不停止事件的进一步传播</li></ul><p>事件注册</p><ul><li>传统方式：btn.onclick = function(){}，特点：<strong>唯一性，同一个元素同一个事件只能设置一个处理函数</strong></li><li>监听方式：addEventListner（事件类型没有 on，事件处理函数，useCapture），同一个元素同一个事件可以设置多个监听器，按顺序执行。注意需要解绑，否则容易造成内存泄露</li></ul><p>事件对象 event</p><ul><li>event.target，记录<strong>触发事件</strong>的对象。this 是<strong>绑定事件</strong>的对象。e 是不会变的，this 是谁触发就谁</li></ul><p>事件委托</p><ul><li>不是给每个子元素设置 dom 操作，而是<strong>对他们的父元素注册监听事件</strong>（把事件都委托给他们的父亲），<strong>点击子元素后冒泡到父节点</strong>进行事件处理。通过 e.target 可以找到触发事件的对象，知道操作的是哪个子节点。而 this 都是他爹</li></ul></li><li><p>处理元素/节点：</p><ul><li>元素：innerText 处理内容，get/set/removeAttribute 处理属性，style 或者 classList.remove/add/toggle 处理样式</li><li>节点： <ul><li>创建：document.write（），直接将内容写入页面，当文档流执行完毕再调用 write（），会<strong>导致页面重绘</strong>；document.createElement（），父节点.appendChild（在最后添加子节点）、insertBefore（子节点，谁前面）；通过 innerHTML 创建</li><li>删除：removeChild</li><li>其他：replace、clone</li></ul></li></ul></li></ol><h4 id="client、offset、scrollheight" tabindex="-1"><a class="header-anchor" href="#client、offset、scrollheight" aria-hidden="true">#</a> client、offset、scrollHeight</h4><ul><li>clientHeight：div 的<strong>可视区域</strong>高度，不包含 border 和滚动条</li><li>clientTop：元素<strong>上边框</strong>的厚度</li><li>offsetHeight：可视区域高度，<strong>包含 border 和滚动条</strong></li><li>offsetTop：从 border 的最外部开始算，相对于设置了 position 属性的<strong>父容器顶端位置的距离</strong></li><li>scrollHeight：<strong>所有区域高度，包含因滚动被隐藏的部分</strong>。不包括边框和进度条</li><li>scrollTop：滚动后<strong>被隐藏的高度</strong>。内容顶端和可见内容顶端的差距</li></ul><h4 id="拖拽效果" tabindex="-1"><a class="header-anchor" href="#拖拽效果" aria-hidden="true">#</a> 拖拽效果</h4><p>利用 draggable 与拖拽事件：</p><ul><li>元素被拖动：drag、dragstart、dragend、</li><li>元素被某东西拖动进入时：dragenter、dragover、dragleave、drop</li></ul><p>利用 pageX 和 offsetLeft 和鼠标按下松开：</p><ul><li>pageX 获取的是<strong>鼠标点击位置</strong>距离边缘的的位置</li><li>offsetLeft 是 border 最外面和父元素的距离</li><li>两者相减就是鼠标点的在这个<strong>元素的位置</strong>，<strong>保持不动</strong></li><li>鼠标移动的时候会修改 pageX，根据 pageX 和<strong>元素位置</strong>不断计算 offsetLeft 就能行</li></ul><h3 id="js-机制" tabindex="-1"><a class="header-anchor" href="#js-机制" aria-hidden="true">#</a> JS 机制</h3><h4 id="js-特点" tabindex="-1"><a class="header-anchor" href="#js-特点" aria-hidden="true">#</a> JS 特点</h4><ul><li>JS 是<strong>脚本语言</strong>，不需要编译，是<strong>解释型</strong>语言</li><li>弱类型语言，较为灵活</li><li>属于动态类型语言，运行的时候才知道每个变量的类型，编程的时候无需显示指定的类型</li></ul><h4 id="预解析" tabindex="-1"><a class="header-anchor" href="#预解析" aria-hidden="true">#</a> 预解析</h4><ul><li><strong>先函数提升，再变量提升</strong></li></ul><h4 id="垃圾回收" tabindex="-1"><a class="header-anchor" href="#垃圾回收" aria-hidden="true">#</a> 垃圾回收</h4><p>自动释放不是回收，回收会先等一会（等回收机制 GC 的下一次运行），释放是马上做掉</p><ul><li>函数中的局部变量（栈）：会在函数结束时自动释放</li><li>对象的释放（堆）：只要是对象，都需要先赋值 null 让原本对象指向的堆内存的对象变成垃圾对象（<strong>没有被引用的对象就是垃圾对象</strong>），然后再回收堆内存的垃圾对象</li></ul><p>两种方法：</p><ul><li>标记清除：总体思想是将寻找不再使用的对象变为寻找无法到达的对象，即从根部（全局对象）出发定时扫描内存中的对象，凡是能从根部到达的对象都是还需要使用的 <ol><li>垃圾收集器在运行的时候会给存储在内存中的<strong>所有变量都加上标记</strong></li><li>从根部出发将<strong>能触及到的对象的标记清除</strong></li><li>还存在标记的变量被视为准备删除的变量</li><li>垃圾收集器执行最后一步内存清除工作，<strong>销毁那些带标记的值</strong>并回收它们所占用的内存空间</li></ol></li><li>引用计数：统计引用类型变量声明后被引用次数，当次数为 0 时该变量被回收。也就是看一个对象是否有指向它的引用。 如果没有其他对象指向它了，说明该对象已经不再需了</li></ul><h4 id="内存空间" tabindex="-1"><a class="header-anchor" href="#内存空间" aria-hidden="true">#</a> 内存空间</h4><p>栈：变量，也就是基本数据类型、引用的地址。栈内存中的变量一般在其当前执行环境结束就会被销毁和回收</p><p>堆：引用的对象</p><p>池：存放常量</p><p>栈内存由于自身数据结构的特点，所以<strong>栈系统效率较高</strong>；堆内存需要分配空间和地址，还要把地址存到栈中，所以效率低于栈</p><h4 id="内存泄露" tabindex="-1"><a class="header-anchor" href="#内存泄露" aria-hidden="true">#</a> 内存泄露</h4><p>案例：</p><ul><li>未声明而意外产生的全局变量</li><li>没有回收的定时器和回调函数</li><li>闭包</li><li>DOM 元素的引用</li></ul><h4 id="作用域" tabindex="-1"><a class="header-anchor" href="#作用域" aria-hidden="true">#</a> 作用域</h4><ul><li><p>作用域是指变量的有效范围。es6 之前分为全局作用域（script 内部或者 js 文件）和局部作用域（函数作用域）。<strong>ES6 之前没有块级作用域</strong>。在函数内部没有声明直接使用的变量属于全局变量，是<strong>隐式全局变量</strong>。**隐式全局变量不会被全局提升，也不会在函数内部被提升，需要当函数调用之后，才能创建出这个变量。</p></li><li><p>作用域链：内部函数能访问外部函数的变量，<strong>从里到外</strong>链式查找变量的值，就近原则</p></li></ul><h4 id="单线程" tabindex="-1"><a class="header-anchor" href="#单线程" aria-hidden="true">#</a> 单线程</h4><ul><li><p>为什么 js 是单线程：JavaScript 作为浏览器脚本语言，主要用途是与用户互动，以及操作 DOM，这决定了它只能是单线程，否则会带来很复杂的同步问题。比如若 js 同时拥有两个线程，一个线程在某个 DOM 节点上添加内容，另一个线程删除这个节点，那浏览器将不知所措</p></li><li><p>为了利用多核 CPU 的计算能力，HTML5 提出 Web Worker 标准，允许 JS 脚本创建多个线程，<strong>但子线程完全受主线程控制，且不得操作 DOM</strong>，所以该标准并没有改变 JS 单线程的本质</p></li></ul><h4 id="异步加载" tabindex="-1"><a class="header-anchor" href="#异步加载" aria-hidden="true">#</a> 异步加载</h4><ul><li>defer 属性：加在 script 标签中，将脚本文件设置为延迟加载。遇到带有 defer 属性的 script 标签，浏览器会再开启一个线程去下载 js 文件，同时继续解析 HTML 文档，等<strong>HTML 全部解析完毕 DOM 加载完成后，再去执行加载好的 js 文件</strong></li><li>async 属性：类似于 defer 属性，但与 defer 不同的是，它会在<strong>下载完毕后立刻执行</strong></li></ul><h4 id="事件循环机制" tabindex="-1"><a class="header-anchor" href="#事件循环机制" aria-hidden="true">#</a> 事件循环机制</h4><ul><li>因为 JS 是单线程，所以要通过事件循环机制，让运行时不会发生阻塞</li><li>任务分类： <ul><li>同步任务：会进入主线程</li><li>异步任务：会先进入任务队列 <ul><li>宏任务：script(整体代码)、setTimout、setInterval、I/O、UI 交互事件。都是<strong>浏览器的 api</strong></li><li>微任务：new promise().then(回调)、MutationObserver(html5 新特性、nextTick</li><li><strong>微任务的优先级大于宏任务</strong></li></ul></li></ul></li><li>流程： <ul><li>一行行读取代码：遇到同步任务放到执行栈，逐层读取压栈；遇到异步任务塞给异步进程</li><li>如果某行代码或者用户操作，触发了异步任务，异步进程就把该异步任务的回调放到任务队列</li><li>任务队列等待执行栈空了就把任务队列的微任务拿出，塞到执行栈</li></ul></li><li>为什么 setTimeout 不可靠： <ul><li>setTimeout 是一段时间后，把回调放入任务队列。但并不是马上执行，还要等执行栈执行完成</li></ul></li><li>用于解使 async 和 await： <ul><li>首先 async 和 await 是 Promise.then 的一种语法糖</li><li>如果是写 Promise 的写法，就是 new Promise（（）= &gt;{ 语句 } ）.then（） <ul><li>先读取 new Promise 放到执行栈，然后读取内部的回调函数到执行栈，then 的回调塞给异步进程</li><li>然后读取回调里面的语句放到执行栈执行</li><li>如果遇到了 resolve（），那就说明触发了异步操作，就把 then 从异步进程拿到任务队列</li><li>等执行栈里面所有语句都执行完了，就把 then 回调的内容拿到执行栈，逐层拿出执行</li></ul></li><li>而 await 做了什么？await 做了：<strong>await 及后面的操作都相当于原本是写在 then 的回调里面的</strong>，现在不用写在 then 的回调里面</li></ul></li></ul><p>案例：</p><ul><li>0 秒。读取 sequentialStart();把这句加入执行栈 <ul><li>把 sequentialStart 里面的内容加入到执行栈 <ul><li>拿出第一句：console.log(&#39;=========SEQUENTIAL START===========&#39;);执行完丢掉</li><li>拿出第二句：const slow = await slowPromise();遇到这句相当于执行 slowPromise()和设置 then。那就把 slowPromise()放到执行栈，给 slow 赋值和后面部分的作为一个 then 丢给异步进程 <ul><li>把 slowPromise 里面的内容加入到执行栈 <ul><li>第一句：console.log(&quot;starting slow promise&quot;);执行完丢掉</li><li>第二句：return new Promise（） <ul><li>拿出 Promise 的回调函数加入到执行栈 <ul><li>第一句：setTimeout。把 setTimeout 回调丢给异步进程</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li><li>至此，以上所有语句要么被扔到了执行栈执行完丢掉，要么被扔到了异步进程处理 <ul><li>异步进程包括 2 个东西： <ul><li>一个是 slowPromise 的 await，也就相当于 slowPromise 的 then 回调</li><li>一个是 setTimeout 的回调，2 秒后执行</li></ul></li></ul></li><li>读取 setTimeout(concurrentStart, 4000);加入执行栈 <ul><li>把 concurrentStart 丢给异步进程</li></ul></li><li>读取 setTimeout(concurrentPromise, 7000);加入执行栈 <ul><li>把 concurrentPromise 丢给异步进程</li></ul></li><li>读取 setTimeout(parallel, 10000);加入执行栈 <ul><li>把 parallel 丢给异步进程</li></ul></li><li>读取 setTimeout(parallelPromise, 13000);加入执行栈 <ul><li>把 parallelPromise 丢给异步进程</li></ul></li><li>至此，同步内容执行完毕，执行栈为空。异步进程有 slowPromise 的 then、一个 2 秒后执行的 setTimeout 的回调、一个 4 秒、一个 7 秒、一个 10 秒、一个 13 秒</li><li>2 秒过去了，现在是 2 秒。需要等待 2 秒的回调进入任务队列，然后进入执行栈 <ul><li>第一句：resolve(&quot;slow&quot;);于是 slowPromise 的 then 进入任务队列</li><li>第二句：console.log(&quot;slow promise is done&quot;);执行完丢掉</li><li>这个回调执行完了，丢掉</li></ul></li><li>slowPromise 的 then 进入执行栈，也就是有了 await 值，是“slow” <ul><li>await 下面第一句，相当于 then 回调第一句：console.log(slow);打印出“slow”</li><li>await 下面第二句，相当于 then 回调第二句：const fast = await fastPromise(); 遇到这句相当于执行 fastPromise()和设置 then。那就把 fastPromise()放到执行栈，给 fast 赋值和后面部分的作为一个 then 丢给异步进程 <ul><li>把 fastPromise 里面的内容加入到执行栈 <ul><li>第一句：console.log(&quot;starting fast promise&quot;);执行完丢掉</li><li>第二句：return new Promise（） <ul><li>拿出 Promise 回调函数加入执行栈 <ul><li>第一句：setTimeout。把 1 秒的 setTimeout 回调丢给异步进程</li></ul></li></ul></li></ul></li></ul></li></ul></li><li>1 秒过去了，现在是 3 秒。等待 1 秒的回调进入任务队列，然后进入执行栈 <ul><li>第一句：resolve(&quot;fast&quot;);于是 fastPromise 的 then 进入任务队列</li><li>第二句：console.log(&quot;fast promise is done&quot;);执行完丢掉</li></ul></li><li>fastPromise 的 then 进入执行栈，也就是有了 await 值，是“fast” <ul><li>await 下面第一句，相当于 then 回调第一句：console.log(fast);</li></ul></li><li>1 秒过去了，现在是 4 秒。4 秒的 setTimeout 的回调进入执行队列，进入执行栈 <ul><li>第一句： console.log(&#39;===========CONCURRENT START with await===========&#39;);执行完丢掉</li><li>第二句：const slow = slowPromise();放到执行栈 <ul><li>第一句放到执行栈：console.log(&quot;starting slow promise&quot;);</li><li>第二句放到执行栈：new Promise <ul><li>Promise 回调放入执行栈： <ul><li>第一句：2 秒的 setTimeout，丢给异步进程</li></ul></li></ul></li></ul></li><li>第三句：const fast = fastPromise();放到执行栈 <ul><li>第一句放到执行栈：console.log(&quot;starting fast promise&quot;);</li><li>第二句放到执行栈：new Promise <ul><li>回调放入执行栈： <ul><li>第一句：1 秒的 setTimeout，丢给异步进程</li></ul></li></ul></li></ul></li><li>第四句：console.log(await slow);相当于一个 then 回调丢给异步进程，第一句是 console，第二句是后面的</li></ul></li><li>1 秒过去了，现在是 5 秒。1 秒的 setTimeout 移入任务队列移入执行栈 <ul><li>第一句：resolve(&quot;fast&quot;);</li><li>第二句:console.log(&quot;fast promise is done&quot;);</li></ul></li><li>1 秒过去了，现在是 6 秒。2 秒的 setTimeout 移入任务队列移入执行栈 <ul><li>第一句：resolve(&quot;slow&quot;);1 秒的 then 移到任务队列</li><li>第二句：console.log(&quot;slow promise is done&quot;);</li><li>执行完了，执行栈为空</li></ul></li><li>1 秒的 then 移到执行栈 <ul><li>第一句：console.log(await slow);是“slow”</li><li>第二句：console.log(await fast);因为已经 resolve 了所以直接输出 fast</li></ul></li><li>1 秒过去了，现在是 7 秒。7 秒的 timeout 进入任务队列，进入执行栈 <ul><li>第一句：console.log(&#39;===========CONCURRENT START with Promise.all===========&#39;);</li><li>第二句：Promise.all，相当于 new Promise，参数是调用 slowPromise（）和 fastPromise（）的结果。all 的 then 丢给异步进程 <ul><li>调用 slowPromise（） <ul><li>执行栈进入 console.log(&quot;starting slow promise&quot;);</li><li>执行栈进入 new Promise，进入回调 <ul><li>2 秒 timeout 回调丢给异步进程</li></ul></li></ul></li><li>调用 fast <ul><li>执行栈进入 console.log(&quot;starting fast promise&quot;);</li><li>进入 new Promise，进入回调 <ul><li>1 秒 timeout 回调丢给异步进程</li></ul></li></ul></li></ul></li></ul></li><li>1 秒过去，现在是 8 秒。8 秒进入 resolve(&quot;fast&quot;);然后 console.log(&quot;fast promise is done&quot;);</li><li>1 秒过去，现在是 9 秒。9 秒进入 resolve(&quot;slow&quot;);然后 console.log(&quot;slow promise is done&quot;);</li><li>Promise.all 为 true，all 的 then 进入任务队列进入执行栈，输出 slow 和 fast</li><li>1 秒过去现在是 10 秒。10 秒的 timeout 进入任务队列，进入执行栈 <ul><li>第一句：console.log(&#39;===========PARALLEL with await Promise.all===========&#39;);</li><li>第二句：Promise.all，相当于 new Promise <ul><li>第一个参数 async()=&gt;console.log(await slowPromise())，要先获取 slowPromise()的结果然后再输出，相当于输出是 then 的语句进任务队列。slowPromise 入栈 <ul><li>第一句：console.log(&quot;starting slow promise&quot;);</li><li>第二句：然后 2 秒定时器给异步进程</li></ul></li><li>第二个参数是 console.log(await fastPromise())，同理相当于输出是 then 里面的语句进任务队列。fastPromise 入栈 <ul><li>第一句：console.log(&quot;starting fast promise&quot;);</li><li>第二句：然后 1 秒定时器给异步进程</li></ul></li></ul></li></ul></li><li>1 秒过去现在是 11 秒。1 秒定时器好了 resolve(&quot;fast&quot;);然后 console.log(&quot;fast promise is done&quot;);然后 1 秒的 then 进栈输出 console.log(await fastPromise())，是“fast”</li><li>1 秒过去 12 秒 。同理 console.log(&quot;slow promise is done&quot;)，然后 slow</li><li>1 秒过去 13 秒。13 秒回调进队列进栈。 <ul><li>第一句 console.log(&#39;===========PARALLEL with Promise.then===========&#39;);</li><li>第二句 slowPromise 进栈，slow 有 then 进异步进程 <ul><li>第一句： console.log(&quot;starting slow promise&quot;);</li><li>第二句：2 秒定时器进异步进程</li></ul></li><li>第三局 fastPromise 进展，fast 有 then 进异步进程 <ul><li>第一句：console.log(&quot;starting fast promise&quot;);</li><li>第二句：1 秒定时器进异步进程</li></ul></li></ul></li><li>1 秒过去 14 秒。fast 定时进队列进栈 resolve，fast 的 then 进队列，然后输出 console.log(&quot;fast promise is done&quot;);然后 then 进栈输出 fast</li><li>1 秒过去 15 秒。同上不过变成 slow</li></ul><h3 id="es6" tabindex="-1"><a class="header-anchor" href="#es6" aria-hidden="true">#</a> ES6</h3><h4 id="let、const、var" tabindex="-1"><a class="header-anchor" href="#let、const、var" aria-hidden="true">#</a> let、const、var</h4><p>let：有块级作用域。不能提前解析提前调用。不能重复定义。循环里面 let 和 var 不同，因为 var 没有块级作用域，i 会提升成全局变量。如果在内部给 arr[i]绑定回调，异步的回调执行的时候已 i 已经是最大的了。let 不会，每次循环 i 都是一个新的 i</p><h4 id="箭头函数" tabindex="-1"><a class="header-anchor" href="#箭头函数" aria-hidden="true">#</a> 箭头函数</h4><ul><li>没有 argument</li><li>this 指向的是他自身<strong>定义时所在的作用域的 this（普通函数的 this 的指向是动态的，是被调用的时候根据调用者来决定的。而箭头函数在定义的时候就定好了 this 是谁。例如这个箭头函数写在一个函数内部，那 this 就是这个函数作用域里面的 this，也就是会调用那个函数的对象）</strong></li><li>没有 prototype</li><li>不能用作构造函数来被 new 调用</li></ul><h4 id="解构赋值" tabindex="-1"><a class="header-anchor" href="#解构赋值" aria-hidden="true">#</a> 解构赋值</h4><p>数组有下标有顺序所以变量名可以自由，但对象没有顺序所以<strong>变量名必须要和对象的属性或方法一致</strong>才能让属性找到变量</p><p>变量中 name 的完整写法应该是<strong>name：name</strong>，前面的 name 是提供给对象<strong>匹配的模式</strong>，后面的 name 才是<strong>变量</strong>，用于赋值</p><ul><li>例如 let {a：b} = {a:&#39;123&#39;}，对象找到和属性 a 同名的模式 a 的变量 b，并且<strong>给 b 赋值‘123’</strong></li></ul><p>可以把数组当作对象来解构，key 就是下标</p><ul><li>let {0:first, [arr.length-1] : last} = [ 1, 2, 3 ]，就有了 first 和 last 两个变量</li><li>数组是对象，有 length 属性，所以可以 let {length} = [1,2,3,4,5]</li></ul><p>理解[a, b] = [b, a]：前面相当于 a:a，那就找到后面数组中模式为 a 的，也就是后面的值，把它给 a 这个变量</p><h4 id="set" tabindex="-1"><a class="header-anchor" href="#set" aria-hidden="true">#</a> Set</h4><ul><li>声明：let s = new Set（），可以传参，传入可迭代的数据，会自动去重</li><li>属性：size</li><li>方法：add（）、delete（）、has（）、clear（）</li><li>用法： <ul><li>数组去重</li><li>求交集（先去重，用 filter 遍历集合 a 的 item，看集合 b 是否 has（item），最后筛选出 b 中的 a，就是 b∩a）</li><li>并集（直接用...进行数组拼接，然后 set 去重）</li><li>差集（各自去重，用 filter 遍历 a，看集合 b 是否 has（item），最终筛选出 b 中的不是 a 的，就是 b-a）</li></ul></li></ul><h4 id="map" tabindex="-1"><a class="header-anchor" href="#map" aria-hidden="true">#</a> Map</h4><p>map 就是升级版的对象。对象的键只能是字符串，map 的键可以是别的例如对象</p><ul><li>声明：let m = new Map（）</li><li>属性：size</li><li>方法：set（键，值）、delete（键）、get（键）、clear（）</li></ul><h4 id="promise" tabindex="-1"><a class="header-anchor" href="#promise" aria-hidden="true">#</a> Promise</h4><ul><li><p>Promise 是什么：构造函数，接收参数：一个函数，<strong>当创建实例的时候</strong>，该函数里的内容会立即执行。这函数又接收两个参数，两个参数均为函数，一个为 resolve，一个为 reject</p><ul><li>异步操作成功时调用 resolve，resolve 函数将 promise 对象的状态从 pending 变为 resolved 并将结果作为参数传出去</li><li>异步操作失败时调用 reject，reject 函数将 promise 对象的状态从 pending 变为 rejected，并将操作报出的错误作为结果传递出去</li></ul></li><li><p>Promise 实例生成后，可以用 then 方法分别指定 resolved 状态和 rejected 状态的回调函数</p><ul><li>then 方法接收两个函数作为参数，为 resolved 和 rejected 的回调</li><li>catch 方法在 then 方法后调用，发生错误时调用，本质上等同于 then(null, rejected);</li></ul></li><li><p>三个状态：pending、resolved（fulfilled）、rejected。一旦状态改变就凝固了，不会再改变（pending→resolved；pending→rejected）。实例对象的状态不受外部影响，只有异步操作的结果才能决定当前是哪一种</p></li><li><p>如何设计一个 Promise 函数</p><ul><li><p>构造函数：参数是一个构造器函数。函数会有 2 个参数 resolveCallback 和 rejectCallback 等待用户传入。用户会在这两个 callback 中使用 resolve 和 reject，所以还需要在 Promise 准备好 resolve 和 reject 这两个函数，而 resolve 和 reject 的目的就是为了操作 promiseResult 和 PromiseStatus 这两个属性。</p><ul><li>从实例化的参数中获取 resolveCallback 和 rejectCallback。this.xxx = xxx</li><li>resolve：注意是 window 来调用的 resolve <ul><li>调用成功的回调：this（这个 this 暂时写只是为了方便，因为这个函数是 window 调用，所以要用 that 获取 this）.temp.resolveCallback &amp;&amp; this.temp.resolveCallback()。接收传入的参数，给 promiseResult；把 PromiseStatus 改成 fulfilled</li></ul></li><li>reject：注意是 window 来调用 <ul><li>同理，调用失败的回调。接受传入的参数，修改实例属性</li></ul></li></ul></li><li><p>静态属性</p></li><li><p>静态函数</p><ul><li>all：传入 Promise 对象数组，如果全部为成功就为返回一个状态为成功的 Promiss 对象，并且 PromiseResult 是所有值组成的数组，并且是按照顺序的。 <ul><li>实现：return new Promise，内部每个 Promise 对象都 then，成功的回调中 count++并且记录到 arr[i]，等 count 够了就 resolve(arr)，一旦有一个失败就 reject</li></ul></li><li>race：哪个 Promise 对象<strong>先</strong>改变状态为成功或失败，race（）返回的 Promise 对象就取决于谁 <ul><li>实现：return new Promise，内部遍历每个数组元素，每个的 then（）都是成功回调调用 resolve（自己）和失败回调调用 reject（自己）。因为 resolve（）和 reject（）已经设置了不能多次调用了，所以只要改了就只能是那一个</li></ul></li><li>allSettled：返回成功的数组</li></ul></li><li><p>实例属性</p><ul><li>promiseResult</li><li>PromiseStatus：初始值 pending，并且要修改的时候需要判断是否为 pending，是才能改，保证 pending 只能改一次</li><li>temp：用于存储暂时 then 的成功与失败回调</li></ul></li><li><p>实例函数</p><ul><li><p>resolveCallback：靠构造函数给</p></li><li><p>rejectCallback</p></li><li><p>then：判断 PromiseStatus，从而选择执行 resolveCallback 或 rejectCallback</p><ul><li><p>如何实现异步执行回调：</p><ul><li>当 PromiseStatus 为 pending，给 temp 赋值为一个对象，包括属性 resolveCallback 和 rejectCallback</li><li>那什么时候执行呢：resolveCallback 顾名思义当然是 resolve（）之后执行。所以在 resolve（）中除了把状态改成 fulfilled，还要去 temp 读取 resolveCallback</li></ul></li><li><p>如何实现多个回调：一个 promise 实例可以指定使用多次 then（）指定若干个 resolveCallback 和 rejectCallback。无非就是不给 temp 赋值对象，而是数组</p></li><li><p>如何设置返回值：then 返回的也是一个 Promise，结果与实例的 callback 有关。</p><ul><li>当 callback 的返回值是 Promise：直接用，是 fulfilled 就调用 resolve（），是 rejected 就调用 reject（）。实际上也手动做不需要判断，因为是个 Promise 对象，直接就在它这个返回值后面调用 reslove 和 reject 就好</li><li>当 callback 的返回值是非 Promise 值：返回 Promise，值就是这个非 Promise 值，fulfilled 为 true，也就是调用 resolve（）返回 Promise 实例</li></ul></li></ul></li><li><p>catch：类似于 then，就是只有失败回调</p></li></ul></li></ul></li></ul><h4 id="async-和-await" tabindex="-1"><a class="header-anchor" href="#async-和-await" aria-hidden="true">#</a> async 和 await</h4><p>await 获取 Promise 对象的值，阻塞任务。async 加在用到了 await 的函数外。await 后面的操作，相当于是 then 回调里面的内容。async 函数的返回值是 Promise 对象。函数的内部如果有 return，那就是 Promise 返回值的 res 值</p><h4 id="模块化-1" tabindex="-1"><a class="header-anchor" href="#模块化-1" aria-hidden="true">#</a> 模块化</h4><p>ES6：</p><ul><li>export <ul><li>加到声明之前</li><li>export{ a,b,c }</li><li>export default</li></ul></li><li>import <ul><li>import { XXX as YYY, XXXX } from &quot;xxx&quot;</li><li>如果是 export default，不用{}</li></ul></li></ul><p>ES5：</p><ul><li>module.exports。后面的内容是什么，require 的结果就是什么</li><li>require。require 理论上可以运用在代码的任何地方，甚至不需要赋值给某个变量</li></ul><h4 id="proxy" tabindex="-1"><a class="header-anchor" href="#proxy" aria-hidden="true">#</a> Proxy</h4><p>使用方法：var p = new Proxy(target, handler);</p><ul><li>target，代理的对象</li><li>handler：代理的对象描述，包括属性 set、get、has、construct <ul><li><strong>get(target, propKey, receiver)</strong>：拦截获取操作</li><li><strong>set(target, propKey, value, receiver)</strong>：拦截赋值操作</li><li><strong>has(target, propKey)</strong>：拦截 propKey in proxy 的操作</li><li><strong>deleteProperty(target, propKey)</strong>：拦截 delete proxy[propKey]的操作</li><li><strong>ownKeys(target)</strong>：拦截<code>Object.getOwnPropertyNames(proxy)</code>、<code>Object.getOwnPropertySymbols(proxy)</code>、<code>Object.keys(proxy)</code>，返回一个数组</li><li>还有很多拦截的</li><li><strong>apply(target, object, args)</strong>：拦截 Proxy 实例<strong>作为函数</strong>调用的操作，比如<code>proxy(...args)</code>、<code>proxy.call(object, ...args)</code>、<code>proxy.apply(...)</code>。</li><li><strong>construct(target, args)</strong>：拦截 Proxy 实例作为构造函数调用的操作，比如<code>new proxy(...args)</code></li></ul></li></ul><p>作用：</p><ul><li><p>实现虚拟属性：可以在 setter 和 getter 里面设置判断 key 是否为某个东西，然后操作真实属性</p></li><li><p>添加私有属性：可以实现效果，例如以“_”开头的都会被当成私有属性，key.startsWith(&#39;_&#39;)</p></li><li><p>抽离校验模块：可以把校验写成一个函数。传入目标对象和校验函数。返回一个 Proxy 对象，设置 setter。用 validator 去验证。</p><ul><li><p>对象的构造函数：return 创建校验对象的方法（this，校验的方法 validator）</p></li><li><p>创建校验对象的方法：接收 target、validator</p><ul><li>return new Proxy，给 target 的 setter 添加设置：每个 key 被访问的时候，先调用 validator[key](value)，返回 true 才赋值，否则 throw Error</li></ul></li><li><p>若干个校验方法 validator，每个 validator 对应一个类，一个类有很多个属性，所以 validator 也有多个属性，每个属性是一个方法，return true/false，根据 value 来判断</p></li></ul></li></ul><h4 id="reflect" tabindex="-1"><a class="header-anchor" href="#reflect" aria-hidden="true">#</a> Reflect</h4><p>出现目的：</p><ul><li><p>将 Object 对象的一些明显属于语言内部的方法</p><p>比如 Object.defineProperty，放到 Reflect 对象上</p></li><li><p>修改某些 Object 方法的返回结果，让其变得更合理</p><p>比如，Object.defineProperty(obj, name, desc)在无法定义属性时，会抛出一个错误，而 Reflect.defineProperty(obj, name, desc)则会返回 false</p></li><li><p>让 Object 操作都变成函数行为</p><p>某些 Object 操作是命令式，比如 name in obj 和 delete obj[name]，而 Reflect.has(obj, name)和 Reflect.deleteProperty(obj, name)让它们<strong>变成了函数行为</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 老写法</span>
<span class="token string">&quot;assign&quot;</span> <span class="token keyword">in</span> Object<span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">// 新写法</span>
Reflect<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>Object<span class="token punctuation">,</span> <span class="token string">&quot;assign&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>与 Proxy 对象的方法一一对应，只要是 Proxy 对象的方法，就能在 Reflect 对象上找到对应的方法。这就让 Proxy 对象可以方便地调用对应的 Reflect 方法，完成默认行为，作为修改行为的基础。也就是说，不管 Proxy 怎么修改默认行为，<strong>总可以在 Reflect 上获取默认行为</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//采用Reflect.set方法将值赋值给对象的属性，确保完成原有的行为，然后再部署额外的功能</span>
    <span class="token keyword">var</span> success <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;property &quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot; on &quot;</span> <span class="token operator">+</span> target <span class="token operator">+</span> <span class="token string">&quot; set to &quot;</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> success<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="js-优化" tabindex="-1"><a class="header-anchor" href="#js-优化" aria-hidden="true">#</a> JS 优化</h3><h4 id="requestanimationframe" tabindex="-1"><a class="header-anchor" href="#requestanimationframe" aria-hidden="true">#</a> requestAnimationFrame</h4><p>setTimeout/ setInterval 的缺陷就是设定的时间并不精确，如果任务队列中还有任务尚未执行完毕，那么后添加的任务就必须等待，<strong>这个等待的时间造成了原本设定的动画时间间隔不准</strong>。</p><p>requestAnimationFrame 就是解决这个问题的，<strong>采用系统时间间隔</strong>(约 16.7ms)，保持最佳绘制效果与效率，使<strong>各种网页动画有一个统一的刷新机制（意思是所有 DOM 操作会被集中起来在一次重绘重排中完成）</strong>，从而节省系统资源，提高系统性能，如果某个函数会改变网页的布局，一般就放在 window.requestAnimationFrame() 里面执行</p><ul><li>语法：window.requestAnimationFrame(callback)。<strong>callback 传入参数表示当前被 requestAnimationFrame 触发的时间 timestamp</strong>，返回值是个请求 id，可以用于 cancelAnimationFrame</li></ul><h4 id="防抖" tabindex="-1"><a class="header-anchor" href="#防抖" aria-hidden="true">#</a> 防抖</h4><p>抖到最后才执行。也就是要用一个定时器设置过一段时间才做，你一直做就一直重置定时器，直到你抖完了为止</p><ul><li>鼠标频繁移入视频</li><li>频繁地缩放屏幕</li></ul><h4 id="节流" tabindex="-1"><a class="header-anchor" href="#节流" aria-hidden="true">#</a> 节流</h4><p>控制执行的次数。你干就直接给你干，但你后面一段时间都别干了。所以就是如果没有定时器就做事然后创建一个定时器，有定时器就不做事</p><ul><li>滚动加载更多</li></ul><h4 id="懒加载" tabindex="-1"><a class="header-anchor" href="#懒加载" aria-hidden="true">#</a> 懒加载</h4><p>如何加载的：图片的加载都是因为 src，有 src 才会去加载</p><p>如何实现懒加载：滚动到出现的位置才加载，才给它 src</p><p>关键点：IntersectionObserver，观察者</p><ol><li>获取所有要懒加载的图片</li><li>new IntersectionObserver()，参数传入一个回调函数</li><li>编写函数 callback，callback 的参数要获取数组 entries 中的对象中的 isIntersecting 属性，当被观察对象出现或离开可视区的时候这个属性会变成 true。那就判断这个属性就好了，如果为 true，就给他 src，然后停止对它的观察</li><li>observer 调用 observe 方法，依次传入所有要懒加载的图片作为参数</li></ol><h3 id="ajax" tabindex="-1"><a class="header-anchor" href="#ajax" aria-hidden="true">#</a> AJAX</h3><h4 id="跨域" tabindex="-1"><a class="header-anchor" href="#跨域" aria-hidden="true">#</a> 跨域</h4><ul><li>定义：跨域是指从一个域名去请求另一个域名的资源。只要域名，协议，端口任何一个不同，就视为跨域</li><li>为什么会产生跨域：为了网络安全起见，浏览器设置了<strong>同源策略</strong>。域名，端口，协议全部相同，就叫做同源。不同源的<strong>请求回来的数据会被浏览器拦截，无法接收</strong>：浏览器接收响应，检查响应头，如果响应头中没有允许跨域访问的配置，则不加载，并报出响应异常；有允许跨域访问的设置，正常加载数据。</li><li>同源策略的让步：img、script、style 等变迁都允许跨域<strong>引用</strong>资源，严格来说这都是不符合同源要求的。只不过这里只是引用这些资源，并不能读取到这些资源的内容，实现了安全性和便捷性灵活性的平衡</li></ul><h4 id="前端解决跨域" tabindex="-1"><a class="header-anchor" href="#前端解决跨域" aria-hidden="true">#</a> 前端解决跨域</h4><ul><li><p>JSONP：利用 script 标签没有跨域限制，发送 get 请求，带上 callback 作为参数传给后端，后端返回数据时会<strong>将这个 callback 参数作为函数名，函数参数用 JSON 数据</strong>。缺点：只能 get 请求</p></li><li><p>CORS：允许浏览器向跨源服务器，发出 XMLHttpRequest 请求，从而克服了 AJAX 只能同源使用的限制。缺点：IE10 以下不支持</p><ul><li>简单请求：请求是 get/post/head。并且请求头只包含安全字段，如果是 content-type 只能是 application/x-www-form-urlencoded、multipart/form-data、text/plain</li><li>非简单请求</li></ul><p>浏览器对两种请求的处理不同：</p><ul><li>简单请求，浏览器直接发出 CORS 请求，也就是加一个 Origin 字段，用来说明，本次请求来自哪个源（协议 + 域名 + 端口）。服务器根据这个值，决定是否同意这次请求 <ul><li>响应头字段： <ul><li>Access-Control-Allow-Origin：允许的 Origin，必选</li><li>Access-Control-Allow-Credentials：是否允许发送 Cookie，可选</li><li>Access-Control-Expose-Headers：向客户端暴露出来的，客户端能从响应中拿到其他字段。可选</li></ul></li></ul></li><li>非简单请求：会在正式通信之前，增加一次 HTTP 查询请求，称为&quot;预检&quot;请求（preflight），请求方法是 OPTIONS，包括两个特殊字段。服务器收到&quot;预检&quot;请求以后，检查了 Origin、Access-Control-Request-Method 和 Access-Control-Request-Headers 字段以后，确认允许跨源请求，就可以做出回应 <ul><li>预检请求： <ul><li>Access-Control-Request-Method：必选，列出会用到哪些 HTTP 方法</li><li>Access-Control-Request-Headers：可选，指定浏览器 CORS 请求会额外发送的头信息字段</li></ul></li><li>响应： <ul><li>Access-Control-Allow-Methods：返回的是所有支持的方法，而不单是浏览器请求的那个方法。这是为了避免多次&quot;预检&quot;请求</li><li>Access-Control-Allow-Headers：允许的请求头。如果请求中有-Request-Headers，就会返回支持的所有头信息，就必选</li><li>Access-Control-Allow-Credentials，可选</li><li>Access-Control-Max-Age：预检请求的有效期，可选</li></ul></li></ul></li></ul></li><li><p>配置代理</p><ul><li>配置一个代理服务器域名与服务器的相同，端口不同</li></ul></li></ul><h4 id="手写-xhr" tabindex="-1"><a class="header-anchor" href="#手写-xhr" aria-hidden="true">#</a> 手写 XHR</h4><ol><li>const xhr = new XMLHttpRequest()；</li><li>初始化对象，设置请求方式和 URL：xhr.open（‘GET’ , ‘http://127.0.0.1:8080/server’） <ul><li>非必须，设置<strong>请求头</strong>，setRequestHeader（‘键’，‘值’）。可以设置自定义的请求头，但是需要在服务器设置 Allow-Headers</li></ul></li><li>xhr.send（）</li><li>监听 xhr 的 onreadystatechange 事件。其中这个 readystate 的值有 5 个，0，1，2，3，4，依次表示状态：未初始化，已调用 open（），已调用 send（），服务端返回了部分的结果，服务端返回了全部结果。回调中判断 readyState 的值是不是 4，如果是 4，获取响应码进行判断，如果成功，通过 xhr.status 获取状态码、response 获取响应体 <ul><li>响应数据：后端因为是@RestController，所以返回的都是 JSON 数据，如果是文件，responseType 会是 Blob</li><li>超时处理：给 xhr 设置 timeout 属性，并且可以设置 onTimeout 的回调</li></ul></li></ol><h4 id="axios-的使用" tabindex="-1"><a class="header-anchor" href="#axios-的使用" aria-hidden="true">#</a> axios 的使用</h4><p>配置：</p><ul><li>通过 axios.defaults.baseURL = ’xxxx‘来设置 URL</li><li>axios.defaults.timeout 设置超时时间</li></ul><p>请求：</p><ul><li>get（url，{params:{}，headers:{} }），返回的是一个 Promise 类对象，通常用 await 接收</li><li>post（url，JSON）</li></ul></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><div class="pager"><a href="/newDocs/vue.html" class="prev">Previous <br><span>Vue面试精选</span></a><a href="/newDocs/css.html" class="next">Next <br><span>CSS面试精选</span></a></div><!--]--><!----></main><ul class="catalog" style="top:0px;"><li class="level-3 toc-link-模块化">模块化</li><li class="level-3 toc-link-数据类型">数据类型</li><li class="level-3 toc-link-数组">数组</li><li class="level-3 toc-link-函数">函数</li><li class="level-3 toc-link-对象">对象</li><li class="level-3 toc-link-bom">BOM</li><li class="level-3 toc-link-dom">DOM</li><li class="level-3 toc-link-js-机制">JS 机制</li><li class="level-3 toc-link-es6">ES6</li><li class="level-3 toc-link-js-优化">JS 优化</li><li class="level-3 toc-link-ajax">AJAX</li></ul></div><!--]--></div><div class="search-page" role="search"><span class="search-close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="28" height="28" fill="currentColor"><path d="M224 416c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L224 338.8l169.4-169.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-192 192C240.4 412.9 232.2 416 224 416z"></path></svg></span><div class="gungnir-search-box"><input placeholder="$ grep ..." autocomplete="off" spellcheck="false" value><!----></div></div><div class="menu-btn-container"><div class="menu-btn-wrapper"><div class="menu-btn"><div style="" class="menu-btn-icon"><span></span><span></span><span></span></div><div style="display:none;" class="menu-text">0</div><svg class="menu-progress"><circle class="menu-border" cx="50%" cy="50%" r="48%" style="stroke-dasharray:0% 314.15926%;"></circle></svg></div><div class="menu-btn-child-wrapper"><div title="toggle color mode" class="menu-btn-child"><svg class="ov-icon" style="font-size:1.2em;display:none;" aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"/></svg><svg class="ov-icon" style="font-size:1.2em;display:none;" aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 00283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"/></svg><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"/></svg></div><div class="menu-btn-child"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"/></svg></div><div class="menu-btn-child"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"/></svg></div><div class="menu-btn-child menu-toc-btn"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M48 48a48 48 0 1048 48 48 48 0 00-48-48zm0 160a48 48 0 1048 48 48 48 0 00-48-48zm0 160a48 48 0 1048 48 48 48 0 00-48-48zm448 16H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16v-32a16 16 0 00-16-16zm0-320H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16V80a16 16 0 00-16-16zm0 160H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16v-32a16 16 0 00-16-16z"/></svg></div><div class="toggle-sidebar-button menu-btn-child menu-btn-sidebar" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewBox="-1.6 -1.6 19.2 19.2" fill="currentColor"><path d="M14 2a1 1 0 011 1v10a1 1 0 01-1 1H2a1 1 0 01-1-1V3a1 1 0 011-1h12zM2 1a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V3a2 2 0 00-2-2H2z"/><path d="M3 4a1 1 0 011-1h2a1 1 0 011 1v8a1 1 0 01-1 1H4a1 1 0 01-1-1V4z"/></svg></div></div></div></div><footer class="footer"><span>
          博客使用 <a href="https://v2.vuepress.vuejs.org" target="_blank">VuePress</a> 与
          <a href="https://github.com/Renovamen/vuepress-theme-gungnir" target="_blank">Gungnir 主题进行开发</a>
        </span></footer></div><!--]--></div>
    <script type="module" src="/assets/app.4afcc58d.js" defer></script>
  </body>
</html>
